# ============================================
# Production Environment Variables
# Copy this file to .env.production and fill in the values
# ============================================

# ============================================
# DOMAINS
# ============================================
DOMAIN=fvienot.link
FRONTEND_DOMAIN=crm.fvienot.link
BACKEND_DOMAIN=crmapi.fvienot.link
TRAEFIK_DOMAIN=traefik.fvienot.link

# ============================================
# TRAEFIK DASHBOARD AUTH
# ============================================
# Generate with: htpasswd -nb admin yourpassword | sed -e s/\\$/\\$\\$/g
TRAEFIK_BASIC_AUTH=admin:$apr1$xxxxx$xxxxx

# ============================================
# DATABASE
# ============================================
POSTGRES_DB=medical_crm
POSTGRES_USER=medical_crm_user
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD

# Database synchronization
# NEVER enable in production (can drop/alter tables)
DB_SYNC_ON_START=false

# ============================================
# BACKEND
# ============================================
# openssl rand -base64 32
JWT_SECRET=CHANGE_ME_RANDOM_256_BITS
JWT_EXPIRES_IN=15m

# Generate JWT_REFRESH_SECRET with: openssl rand -base64 32
JWT_REFRESH_SECRET=CHANGE_ME_RANDOM_256_BITS
JWT_REFRESH_EXPIRES_IN=7d

NODE_ENV=production

# Logging level (error, warn, info, debug)
LOG_LEVEL=warn

# ============================================
# ADMIN USER - First Deployment Initialization
# ============================================
# Uncomment and configure after merging admin initialization branch
# ADMIN_EMAIL=admin@fvienot.link
# ADMIN_FIRST_NAME=Admin
# ADMIN_LAST_NAME=User
# ADMIN_PASSWORD=CHANGE_ME_STRONG_PASSWORD

# ============================================
# EMAIL & SMTP
# ============================================
EMAIL_ENABLED=true
EMAIL_FROM_ADDRESS=noreply@fvienot.link
EMAIL_FROM_NAME=Medical CRM

SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
SMTP_FROM=f.vienot@mvo-h.fr

# ============================================
# FRONTEND
# ============================================
# Frontend URL used in email links
FRONTEND_URL=https://crm.fvienot.link

# DiceBear API for avatar generation
DICEBEAR_API_URL=https://api.dicebear.com/7.x

# ============================================
# REMINDER SYSTEM
# ============================================
ENABLE_EMAIL_REMINDERS=true
REMINDER_TIMEZONE=Europe/Paris
REMINDER_BATCH_SIZE=100
REMINDER_CRON_SCHEDULE=0 9 * * *
REMINDER_CACHE_CLEANUP_DAYS=7

# ============================================
# CLOUDFLARE R2 BACKUP
# ============================================
R2_ACCESS_KEY_ID=YOUR_R2_ACCESS_KEY
R2_SECRET_ACCESS_KEY=YOUR_R2_SECRET_KEY
R2_ENDPOINT_URL=https://ACCOUNT_ID.r2.cloudflarestorage.com
R2_BUCKET_NAME=medical-crm-backups

# Test database name for restore tests
TEST_DB_NAME=medical_crm_test_restore

# ============================================
# INTEGRATIONS
# ============================================
# Digiforma Integration
# CRITICAL: Generate a strong random key for production (at least 32 characters)
# Generate with: openssl rand -base64 32
DIGIFORMA_ENCRYPTION_KEY=your-32-char-encryption-key-change-in-production
DIGIFORMA_API_URL=https://app.digiforma.com/api/v1/graphql

# Sage Integration (optional - add when needed)
# SAGE_API_URL=https://api.sage.com
# SAGE_CLIENT_ID=your-sage-client-id
# SAGE_CLIENT_SECRET=your-sage-client-secret

# ============================================
# HETZNER (for GitHub Actions)
# ============================================
HETZNER_HOST=YOUR_HETZNER_IP
HETZNER_USERNAME=deploy
HETZNER_SSH_PORT=22

# ============================================
# GENERATE SECRETS WITH:
# ============================================
# JWT Secret: openssl rand -base64 32
# JWT Refresh Secret: openssl rand -base64 32
# DB Password: openssl rand -base64 24
# Digiforma Encryption Key: openssl rand -base64 32
# Htpasswd (Traefik Dashboard): htpasswd -nb admin yourpassword | sed -e s/\\$/\\$\\$/g
